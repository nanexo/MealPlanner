(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{262:function(e,t,a){e.exports=a(456)},272:function(e,t,a){},454:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),c=a(18),o=a(0),l=a.n(o),i=a(17),u=a.n(i),s=a(22),m=a(45),d=(a(272),a(21)),f=a(23),p=a(62),b=a(521),v=a(515),h=a(511),E=a(517),g=a(518),y=a(500),O=a(516),x=a(40),j=a(29),w=a(460),k=a(491),C=a(457),I=a(458),S=a(493);var N=Object(s.b)(function(e){return{items:e.foods.local}})(function(e){var t=e.items.map(function(e){var t=e.title?l.a.createElement(k.a,{primary:e.title}):l.a.createElement(k.a,{primary:"No Title",primaryTypographyProps:{component:"i"}});return l.a.createElement(C.a,{button:!0,component:x.b,to:"/database/local/"+e.id,key:e.id},t)});return l.a.createElement(I.a,null,l.a.createElement(S.a,{disablePadding:!0},t))}),F=a(494);var A=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{variant:"h4",paragraph:!0},"Swiss food composition database"),l.a.createElement(p.a,{gutterBottom:!0},"You have access to the ",l.a.createElement(F.a,{href:"https://www.naehrwertdaten.ch/en/"},"Swiss food composition database")," through the MealPlanner."),l.a.createElement(p.a,{paragraph:!0},"Below is a complementary local database, in case you need to add foods not found in the database mentioned above."),l.a.createElement(N,null))},D=a(74),z=a(495),P=a(523),M=a(505),R=a(503),W=a(528),L=a(522),B=a(506),T=a(525),H=a(122);a(454);var q=function(e){var t=e.data,a=e.size,n=e.colors,r=[{group:"protein",value:4*t.protein},{group:"carbs",value:4*t.carbs},{group:"fat",value:9*t.fat}],c=r.reduce(function(e,t){return e+t.value},0),o={width:a,height:a,border:a/10+"px solid #ddd",borderRadius:a};return l.a.createElement("div",{className:"calorie-display-wrapper"},l.a.createElement("div",{className:"calorie-display-graphic"},l.a.createElement(H.c,{width:a,height:a,margin:{}},l.a.createElement(H.b,{data:r,outerRadius:"100%",innerRadius:"80%",dataKey:"value",isAnimationActive:!1},r.map(function(e,t){return l.a.createElement(H.a,{key:"cell-".concat(t),fill:n[e.group]})})))),l.a.createElement("div",{className:"calorie-display-graphic",style:o}),l.a.createElement(p.a,{variant:"h5",component:"span",className:"calorie-display-count"},c.toFixed(1)),l.a.createElement(p.a,{variant:"h6",component:"span",className:"calorie-display-label"},"Cals"))};function J(e){var t=e.size,a={display:"inline-block",verticalAlign:"middle",marginRight:"0.5em",width:t,height:t,backgroundColor:e.color,borderRadius:t};return l.a.createElement("span",{style:a})}var $=Object(s.b)(function(e){return{macroColors:e.settings.macroColors}})(function(e){var t=e.data,a=e.size,n=e.hideMacroAmounts,r=e.macroColors,c=function(e,a){return l.a.createElement(z.a,{item:!0,container:!0,alignItems:"center"},l.a.createElement(z.a,{item:!0},l.a.createElement(J,{size:"1em",color:r[a]})),l.a.createElement(z.a,{item:!0},l.a.createElement(p.a,null,e),!n&&l.a.createElement(p.a,null,t[a].toFixed(1),"g")))};return l.a.createElement(z.a,{container:!0,spacing:3,wrap:"nowrap"},l.a.createElement(z.a,{item:!0},l.a.createElement(q,{data:t,size:a||160,colors:r})),l.a.createElement(z.a,{item:!0,container:!0,alignItems:"center",direction:"column",justify:"space-evenly"},c("Protein","protein"),c("Carbs","carbs"),c("Fat","fat")))}),G=a(526),X=a(496),K=a(497),V=a(498),Y=a(499);function Q(e){var t=e.title,a=e.message,n=e.open,r=e.onClose,c=e.onConfirm;return l.a.createElement(G.a,{open:n,onClose:r},l.a.createElement(X.a,null,t),l.a.createElement(K.a,null,l.a.createElement(V.a,null,a)),l.a.createElement(Y.a,null,l.a.createElement(y.a,{onClick:r},"Cancel"),l.a.createElement(y.a,{onClick:c,color:"primary"},"Confirm")))}var U=Object(m.b)({slice:"foods",initialState:{local:[],sfcd:[]},reducers:{putFood:function(e,t){var a=t.payload,n=a.item,r=a.source,c=e.local.findIndex(function(e){return e.id===n.id});-1!==c?e[r][c]=n:e[r].push(n)},deleteFood:function(e,t){return Object(f.a)({},e,{local:e.local.filter(function(e){return e.id!==t.payload.id})})},clearFood:function(e,t){return{local:[],sfcd:[]}}}}),Z=U.actions,_=U.reducer,ee=Z.putFood,te=Z.deleteFood,ae=Z.clearFood,ne=_,re=a(117),ce=a(501);var oe=a(78),le=a(225),ie=[{id:0,title:"Chicken",protein:25,carbs:1,fat:1.5,servingSizeId:0},{id:1,title:"Eggs",protein:13,carbs:1,fat:11,servingSizeId:0},{id:2,title:"Lentils",protein:4.5,carbs:11,fat:2,servingSizeId:0},{id:3,title:"Lettuce",protein:1,carbs:1,fat:.2,servingSizeId:0},{id:4,title:"Vegetable mix",protein:2,carbs:8,fat:.5,servingSizeId:0},{id:5,title:"Edamame",protein:12,carbs:11,fat:4,servingSizeId:0},{id:6,title:"Iso100",protein:25,carbs:.8,fat:.6,servingSizeId:1}],ue=[{id:0,title:"Lunch",meals:[{foodId:"local-0",amount:200},{foodId:"local-1",amount:100},{foodId:"local-2",amount:100},{foodId:"local-3",amount:100}]},{id:1,title:"Dinner",meals:[{foodId:"local-0",amount:200},{foodId:"local-4",amount:120},{foodId:"local-5",amount:50}]},{id:2,title:"Shakes",meals:[{foodId:"local-6",amount:2}]}],se={localFoods:{dbName:"localFoods",config:{keyPath:"id",autoIncrement:!0},addIdIndex:!0,dataPopulator:function(e){ie.forEach(function(t){return e.add(t)})}},sfcdCache:{dbName:"sfcdFoods",config:{keyPath:"id"},addIdIndex:!0},meals:{dbName:"meals",config:{keyPath:"id",autoIncrement:!0},addIdIndex:!0,dataPopulator:function(e){ue.forEach(function(t){return e.add(t)})}},servingSizes:{dbName:"servingSize",config:{keyPath:"id",autoIncrement:!0}},settings:{dbName:"settings",dataPopulator:function(e){e.add({protein:"#0088FE",carbs:"#00C49F",fat:"#FFBB28"},"macroColors")}}};var me=Object(le.a)("MealPlanner",2,{upgrade:function(e,t){t<2&&(Object(oe.a)(e.objectStoreNames).forEach(function(t){return e.deleteObjectStore(t)}),Object.values(se).forEach(function(t){var a=e.createObjectStore(t.dbName,t.config);t.addIdIndex&&a.createIndex("id","id"),t.dataPopulator&&t.dataPopulator(a)}))}});var de=Object.keys(se).reduce(function(e,t){return e[t]=function(e){var t=function(){var t=Object(c.a)(r.a.mark(function t(a){var n,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.getAll){t.next=4;break}return t.next=3,a.getAll(e);case 3:return t.abrupt("return",t.sent);case 4:return n=[],t.next=7,a.openCursor();case 7:c=t.sent;case 8:if(!c){t.next=15;break}return n.push(c.value),t.next=12,c.continue();case 12:c=t.sent,t.next=8;break;case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return{getAll:function(){return me.then(function(e){return t(e)})},get:function(t){return me.then(function(a){return a.get(e,t)})},save:function(t){return me.then(function(a){return a.put(e,t).then(function(t){return a.get(e,t)})})},delete:function(t){return me.then(function(a){return a.delete(e,t)})},put:function(t,a){return me.then(function(n){return n.put(e,t,a)})},clear:function(){return me.then(function(t){return t.clear(e)})}}}(se[t].dbName),e},{});function fe(e,t){""===e[t]||isNaN(e[t])?e[t]=0:e[t]=parseFloat(e[t])}var pe={localFood:{saveItem:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.a)({},t),["protein","carbs","fat"].forEach(function(e){return fe(a,e)}),e.abrupt("return",de.localFoods.save(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),deleteItem:function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,c,o,l,i,u,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.localFoods.delete(t.id);case 2:return e.next=4,de.meals.getAll();case 4:a=e.sent,n=!0,c=!1,o=void 0,e.prev=8,l=a[Symbol.iterator]();case 10:if(n=(i=l.next()).done){e.next=18;break}return u=i.value,s=Object(f.a)({},u,{meals:u.meals.filter(function(e){return e.foodId!=="local-"+t.id})}),e.next=15,de.meals.save(s);case 15:n=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,o=e.t0;case 24:e.prev=24,e.prev=25,n||null==l.return||l.return();case 27:if(e.prev=27,!c){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,null,[[8,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}(),clearItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:de.localFoods.clear();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAllItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.localFoods.getAll());case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},sfcdFoodCache:{getItem:function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.sfcdCache.get(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),saveItem:function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.sfcdCache.save(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getAllItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.sfcdCache.getAll());case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),clearItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.sfcdCache.clear());case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},meals:{saveItem:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fe(a=Object(f.a)({},t),"amount"),e.abrupt("return",de.meals.save(a));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),deleteItem:function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:de.meals.delete(t.id);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),clearItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:de.meals.clear();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAllItems:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.meals.getAll());case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},settings:{get:function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.settings.get(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),dismissDemoDataNotice:function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:de.settings.put(!0,"demoDataNoticeShown");case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}},be=Object(w.a)(function(e){return{root:{alignContent:"center"},buttonContainer:{alignContent:"flex-end"}}});var ve=Object(s.b)(function(e,t){var a=t.match,n=parseInt(a.params.id);return{item:isNaN(n)?{title:"",protein:0,carbs:0,fat:0,servingSizeId:0}:e.foods.local.find(function(e){return e.id===n}),servingSizes:e.servingSizes}},{putFood:ee,deleteFood:te})(function(e){var t=e.servingSizes,a=e.putFood,n=e.deleteFood,o=e.backPath,i=l.a.useState(Object(f.a)({},e.item)),u=Object(d.a)(i,2),s=u[0],m=u[1],p=l.a.useState(null),b=Object(d.a)(p,2),v=b[0],h=b[1],E=l.a.useState(!1),g=Object(d.a)(E,2),O=g[0],x=g[1],w=l.a.useState(null),k=Object(d.a)(w,2),C=k[0],I=k[1],S=function(){var e=Object(re.a)();return Object(ce.a)(e.breakpoints.down("xs"))}(),N=be();if(!s)return null;e.item&&s.id!==e.item.id&&m(Object(f.a)({},e.item));var F=void 0===s.id,A=function(e,t){return function(a){var n=a.target.value;t&&isNaN(n)&&(n=s[e]),m(Object(f.a)({},s,Object(D.a)({},e,n)))}},H=function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.localFood.saveItem(s);case 3:t=e.sent,a({item:t,source:"local"}),I("/database/local/"+t.id),h("Saved successfully."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),h("Error occurred.");case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.prev=1,e.next=4,pe.localFood.deleteItem(s);case 4:n(s),I(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h("Error occurred");case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{container:!0,direction:"column",spacing:2,className:N.root},l.a.createElement(z.a,{item:!0},l.a.createElement($,{data:s,size:220,hideMacroAmounts:!0})),l.a.createElement(z.a,{item:!0},l.a.createElement(P.a,{label:"Title",id:"title",fullWidth:!0,value:s.title,onChange:A("title")})),l.a.createElement(z.a,{item:!0},l.a.createElement(P.a,{type:S?"number":"text",label:"Protein",id:"protein",fullWidth:!0,value:s.protein,onChange:A("protein",!0),InputProps:{endAdornment:l.a.createElement(M.a,{position:"end"},"g")}})),l.a.createElement(z.a,{item:!0},l.a.createElement(P.a,{type:S?"number":"text",label:"Carbs",id:"carbs",fullWidth:!0,value:s.carbs,onChange:A("carbs",!0),InputProps:{endAdornment:l.a.createElement(M.a,{position:"end"},"g")}})),l.a.createElement(z.a,{item:!0},l.a.createElement(P.a,{type:S?"number":"text",label:"Fat",id:"fat",fullWidth:!0,value:s.fat,onChange:A("fat",!0),InputProps:{endAdornment:l.a.createElement(M.a,{position:"end"},"g")}})),l.a.createElement(z.a,{item:!0},l.a.createElement(R.a,{fullWidth:!0},l.a.createElement(W.a,null,"Serving Size"),l.a.createElement(L.a,{label:"Serving Size",fullWidth:!0,value:s.servingSizeId,onChange:A("servingSizeId")},t.map(function(e){return l.a.createElement(B.a,{key:e.id,value:e.id},e.label)})))),l.a.createElement(z.a,{item:!0,className:N.buttonContainer},l.a.createElement(z.a,{container:!0,spacing:2,justify:"flex-end"},l.a.createElement(z.a,{item:!0},!F&&l.a.createElement(y.a,{color:"secondary",onClick:function(){return x(!0)}},"Delete")),l.a.createElement(z.a,{item:!0},l.a.createElement(y.a,{variant:"contained",color:"primary",onClick:H},"Save"))))),l.a.createElement(T.a,{open:Boolean(v),message:l.a.createElement("span",null,v),autoHideDuration:3e3,onClose:function(){return h(null)}}),l.a.createElement(Q,{open:Boolean(O),title:"Confirm",message:"Are you sure you want to delete this item?",onClose:function(){return x(!1)},onConfirm:q}),C&&l.a.createElement(j.a,{to:C,replace:!0}))}),he=a(510),Ee=a(512),ge=a(527),ye=a(507),Oe=a(508),xe=a(509);function je(e){var t=Object(f.a)({overflow:"hidden auto"},e.style);return l.a.createElement("div",{style:t},e.children)}var we="http://167.99.253.233",ke=Object(w.a)(function(e){return{databaseHeaders:{backgroundColor:e.palette.background.paper}}});var Ce=Object(s.b)(function(e){return{localFoods:e.foods.local}})(function(e){var t=l.a.useState(""),a=Object(d.a)(t,2),n=a[0],r=a[1],c=l.a.useState(null),o=Object(d.a)(c,2),i=o[0],u=o[1],s=l.a.useState(null),m=Object(d.a)(s,2),f=m[0],p=m[1],b=ke(),v=l.a.createRef();l.a.useEffect(function(){n&&fetch(we+"/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"query food($startsWith: String!) {\n\t\t\t\tfood(startsWith: $startsWith) {\n\t\t\t\t\tid, title, kcal, protein, carbs, fat\n\t\t\t\t}\n\t\t\t}",variables:{startsWith:n}})}).then(function(e){return e.json()}).then(function(e){return u(e.data.food)})},[n]);var h=function(t,a){return function(){e.onSelectFood(t,a),r("")}},E=Boolean(n),g=E?"search-box-popper":void 0,y=function(e){return function(t){return l.a.createElement(C.a,{key:t.id,button:!0,onClick:h(t,e)},l.a.createElement(k.a,null,t.title))}},O=null===i?l.a.createElement(C.a,null,l.a.createElement(ye.a,null)):i.map(y("sfcd"));return l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{fullWidth:!0,id:"foodSearchBox",label:"Search Food",value:n,onChange:function(e){p(e.target),r(e.target.value)},onBlur:function(e){v.current&&v.current.contains(e.relatedTarget)||r("")}}),l.a.createElement(Oe.a,{id:g,open:E,anchorEl:f,style:{zIndex:5e3},ref:v},l.a.createElement(I.a,null,l.a.createElement(je,{style:{maxHeight:400}},l.a.createElement(S.a,{style:{width:f?f.clientWidth:void 0}},l.a.createElement(xe.a,{className:b.databaseHeaders},"Local Database"),e.localFoods.filter(function(e){return e.title.toLowerCase().startsWith(n.toLowerCase())}).map(y("local")),l.a.createElement(xe.a,{className:b.databaseHeaders},"SFCD"),O)))))}),Ie=Object(w.a)(function(e){return{chip:{width:"100%"},chipLabel:{flex:1,overflow:"hidden",textOverflow:"ellipsis",marginRight:12,minWidth:0}}});var Se=Object(s.b)(function(e){return{}})(function(e){var t=l.a.useState(null),a=Object(d.a)(t,2),n=a[0],r=a[1],c=l.a.useState(""),o=Object(d.a)(c,2),i=o[0],u=o[1],s=Ie();return l.a.createElement(z.a,{container:!0,spacing:2,alignItems:"flex-end",justify:"space-between"},l.a.createElement(z.a,{item:!0,xs:7},null===n?l.a.createElement(Ce,{onSelectFood:function(e,t){return r({selected:e,source:t})}}):l.a.createElement(ge.a,{classes:{root:s.chip,label:s.chipLabel},label:n.selected.title,onDelete:function(){return r(null)}})),l.a.createElement(z.a,{item:!0,xs:3},l.a.createElement(P.a,{id:"amount",label:"Amount",value:i,onChange:function(e){var t=e.target.value;isNaN(t)||u(e.target.value)}})),l.a.createElement(z.a,{item:!0,xs:2},l.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.onAddFood(n.selected,n.source,i||0),r(null),u("")}},"Add")))}),Ne=Object(m.b)({slice:"meals",initialState:[],reducers:{putMeal:function(e,t){var a=e.findIndex(function(e){return e.id===t.payload.id});-1!==a?e[a]=t.payload:e.push(t.payload)},deleteMeal:function(e,t){return e.filter(function(e){return e.id!==t.payload.id})},clearMeals:function(e,t){return[]}},extraReducers:Object(D.a)({},te,function(e,t){e.forEach(function(e){return e.meals=e.meals.filter(function(e){return e.foodId!=="local-"+t.payload.id})})})}),Fe=Ne.actions,Ae=Ne.reducer,De=Fe.putMeal,ze=Fe.deleteMeal,Pe=Fe.clearMeals,Me=Ae,Re=Object(w.a)(function(e){return{root:{margin:"auto",maxWidth:e.breakpoints.values.sm},buttonContainer:{alignContent:"flex-end"}}});var We=Object(s.b)(function(e,t){var a=t.match,n=function(t){var a=t.split("-"),n=Object(d.a)(a,2),r=n[0],c=n[1];return c=parseInt(c),e.foods[r].find(function(e){return e.id===c})},r=parseInt(a.params.id);return{getTitle:function(e){return n(e.foodId).title},getAmountLabel:function(t){return function(t){var a=e.servingSizes.find(function(e){return e.id===t.servingSizeId});return a||(a=e.servingSizes[0]),a}(n(t.foodId)).valueLabel},item:isNaN(r)?{title:"",meals:[]}:e.meals.find(function(e){return e.id===r})}},{putMeal:De,deleteMeal:ze,putFood:ee})(function(e){var t=e.getTitle,a=e.getAmountLabel,n=e.backPath,o=e.putMeal,i=e.deleteMeal,u=e.putFood,s=l.a.useState(Object(f.a)({},e.item)),m=Object(d.a)(s,2),p=m[0],b=m[1],v=l.a.useState(null),E=Object(d.a)(v,2),g=E[0],O=E[1],x=l.a.useState(!1),w=Object(d.a)(x,2),I=w[0],N=w[1],F=l.a.useState(null),A=Object(d.a)(F,2),D=A[0],M=A[1],R=Re();if(!p)return null;e.item&&p.id!==e.item.id&&b(Object(f.a)({},e.item));var W=void 0===p.id,L=function(){var e=Object(c.a)(r.a.mark(function e(t,a,n){var c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[].concat(Object(oe.a)(p.meals),[{foodId:"".concat(a,"-").concat(t.id),amount:n}]),"sfcd"!==a){e.next=6;break}return e.next=4,pe.sfcdFoodCache.saveItem(t);case 4:o=e.sent,u({item:o,source:"sfcd"});case 6:b(Object(f.a)({},p,{meals:c}));case 7:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(e){return function(){b(Object(f.a)({},p,{meals:p.meals.filter(function(t){return t!==e})}))}},H=function(){var e=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.meals.saveItem(p);case 3:t=e.sent,o(t),M("/meals/"+t.id),O("Saved successfully."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O("Error occurred.");case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!1),e.prev=1,e.next=4,pe.meals.deleteItem(p);case 4:i(p),M(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),O("Error occurred");case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{container:!0,spacing:2,direction:"column",className:R.root},l.a.createElement(z.a,{item:!0},l.a.createElement(P.a,{autoFocus:!0,fullWidth:!0,id:"title",label:"Title",value:p.title,onChange:function(e){return b(Object(f.a)({},p,{title:e.target.value}))}})),l.a.createElement(z.a,{item:!0},l.a.createElement(Se,{onAddFood:L})),l.a.createElement(z.a,{item:!0},l.a.createElement(S.a,null,p.meals.map(function(e,n){return l.a.createElement(C.a,{key:n,disableGutters:!0},l.a.createElement(k.a,{primary:t(e),secondary:e.amount+a(e)}),l.a.createElement(he.a,null,l.a.createElement(h.a,{edge:"end",onClick:B(e)},l.a.createElement(Ee.a,null))))}))),l.a.createElement(z.a,{item:!0,className:R.buttonContainer},l.a.createElement(z.a,{container:!0,spacing:2,justify:"flex-end"},l.a.createElement(z.a,{item:!0},!W&&l.a.createElement(y.a,{color:"secondary",onClick:function(){return N(!0)}},"Delete")),l.a.createElement(z.a,{item:!0},l.a.createElement(y.a,{variant:"contained",color:"primary",onClick:H},"Save"))))),l.a.createElement(T.a,{open:Boolean(g),message:l.a.createElement("span",null,g),autoHideDuration:3e3,onClose:function(){return O(null)}}),l.a.createElement(Q,{open:Boolean(I),title:"Confirm",message:"Are you sure you want to delete this item?",onClose:function(){return N(!1)},onConfirm:q}),D&&l.a.createElement(j.a,{to:D,replace:!0}))}),Le=a(123),Be=a(513),Te=a(514),He=a(520),qe=Object(w.a)(function(e){return{cardPadding:{padding:"1rem"},cardActionArea:{padding:"0.5em"}}});var Je=Object(s.b)(function(e,t){var a=function(t){var a=t.split("-"),n=Object(d.a)(a,2),r=n[0],c=n[1];return c=parseInt(c),e.foods[r].find(function(e){return e.id===c})},n=function(t){var a=e.servingSizes.find(function(e){return e.id===t.servingSizeId});return a||(a=e.servingSizes[0]),a},r=function(e){return function(t,r){var c=a(r.foodId);return t+c[e]*(r.amount/n(c).value)}};return{macroTotals:function(e){return{protein:e.meals.reduce(r("protein"),0),carbs:e.meals.reduce(r("carbs"),0),fat:e.meals.reduce(r("fat"),0)}}(t.meal),getTitle:function(e){return a(e.foodId).title},getAmountLabel:function(e){return n(a(e.foodId)).valueLabel}}})(function(e){var t=l.a.useState(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],c=qe(),o=e.meal,i=e.macroTotals,u=e.getTitle,s=e.getAmountLabel,m=o.meals.map(function(e,t){return l.a.createElement(C.a,{key:t},l.a.createElement(k.a,{primary:u(e),secondary:e.amount+s(e)}))});return l.a.createElement(I.a,null,l.a.createElement(z.a,{container:!0,direction:"column"},l.a.createElement(z.a,{item:!0},l.a.createElement(p.a,{variant:"h6",component:"h2",className:c.cardPadding},o.title)),l.a.createElement(z.a,{item:!0},l.a.createElement(Le.a,{component:x.b,to:"/meals/"+o.id},l.a.createElement(z.a,{container:!0,direction:"column"},l.a.createElement(z.a,{item:!0,className:c.cardPadding},l.a.createElement($,{data:i,size:200})),l.a.createElement(z.a,{item:!0},l.a.createElement(Be.a,{in:n,timeout:"auto",unmountOnExit:!0},l.a.createElement(S.a,null,m))))))),l.a.createElement(Te.a,null),l.a.createElement(He.a,{className:c.cardActionArea},l.a.createElement(y.a,{className:c.button,onClick:function(){return r(!n)}},n?"COLLAPSE":"EXPAND")))});var $e=Object(s.b)(function(e){return{items:e.meals}})(function(e){var t=e.items.map(function(e,t){return l.a.createElement(z.a,{item:!0,key:e.id},l.a.createElement(Je,{meal:e}))});return l.a.createElement(z.a,{container:!0,spacing:2,justify:"center"},t)});var Ge=Object(s.b)(null,{clearFood:ae,clearMeals:Pe})(function(e){var t=e.clearFood,a=e.clearMeals,n=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.localFood.clearItems();case 2:return e.next=4,pe.meals.clearItems();case 4:return e.next=6,pe.sfcdFoodCache.clearItems();case 6:a(),t();case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return l.a.createElement(I.a,{elevation:e.elevation},l.a.createElement(S.a,{disablePadding:!0},l.a.createElement(C.a,null,l.a.createElement(k.a,{primary:"Clear Data"}),l.a.createElement(y.a,{variant:"outlined",color:"secondary",onClick:n},"Clear"))))}),Xe=a(224),Ke=a.n(Xe),Ve=Object(m.b)({slice:"settings",initialState:{},reducers:{dismissDemoDataNotice:function(e){e.showDemoDataNotice=!1},clearData:function(e,t){}}}),Ye=Ve.actions,Qe=Ve.reducer,Ue=Ye.dismissDemoDataNotice,Ze=(Ye.clearData,Qe),_e=Object(w.a)(function(e){return{snackbar:{bottom:function(e){return e.placeAboveFab?"calc(2em + 55px + 56px)":"calc(1em + 55px)"}}}});var et=Object(s.b)(function(e){return{open:e.settings.showDemoDataNotice}},{dismissDemoDataNotice:Ue})(function(e){var t=e.open,a=e.dismissDemoDataNotice,n=_e({placeAboveFab:e.placeAboveFab}),o=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.settings.dismissDemoDataNotice();case 3:a(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),i=l.a.createElement(p.a,{component:x.b,variant:"body2",color:"secondary",onClick:o,to:"/settings"},"Settings"),u=l.a.createElement("span",null,"We've added some demo data! If you want to clear it, go to ",i,"."),s=[l.a.createElement(h.a,{key:"close",color:"inherit",onClick:o},l.a.createElement(Ke.a,null))];return t&&l.a.createElement(T.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},key:"demoDataNotice",open:t,onClose:o,message:u,action:s,className:n.snackbar})});function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function at(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var nt=l.a.createElement("path",{d:"M294.064 36.904c-3.46 62.976-22.019 124.532-46.448 182.35-49.574 116.458-143.509 210.479-254.802 269.07-26.653 14.06-54.612 26.988-83.44 35.192l-39.345-4.963C-26.759 486.15 66.54 422.757 135.724 339.714c65.661-81.085 107.168-182.101 115.881-286.148-5.302-18.073 6.684-17.981 20.466-16.662h21.993z"}),rt=l.a.createElement("path",{d:"M294.778 38.441c-32.711 66.282-78.277 126.848-134.429 175.084-27.038 22.595-58.643 43.026-93.792 48.428l-38.398-5.107c70.8-15.671 124.527-69.866 167.634-125.076 21.734-29.854 43.083-60.554 56.863-95.035l42.122 1.706z"}),ct=l.a.createElement("path",{d:"M294.741 36.555c13.952 71.51 43.174 139.958 82.589 201.088 3.748 11.42 35.43 31.122 24.491 34.844l-34.556 2.612c-46.053-45.121-70.347-106.478-93.406-165.37-4.943-22.093-24.341-56.573-17.058-72.547l37.94-.627z"}),ot=function(e){var t=e.svgRef,a=at(e,["svgRef"]);return l.a.createElement("svg",tt({viewBox:"0 0 273.586 547.228",height:104,width:104,ref:t},a),nt,rt,ct)},lt=(l.a.forwardRef(function(e,t){return l.a.createElement(ot,tt({svgRef:t},e))}),a.p,"/MealPlanner"),it=Object(w.a)(function(e){var t={width:"calc(100% - ".concat(e.spacing(2),"px)"),maxWidth:968};return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider),alignItems:"center",flex:"none"},toolbar:Object(f.a)({},t),toolbarContent:{flex:1},scrollContainer:{overflow:"hidden auto",flex:1},tabContentWrapper:{overflowX:"hidden",marginRight:"calc(100% - 100vw)"},tabContent:Object(f.a)({},t,{padding:"1em 0",height:"100%",margin:"auto"}),emptyContent:{width:"100%",display:"flex",color:"#ddd",justifyContent:"flex-end",paddingRight:"3.5em",height:133},emptyContentText:{alignSelf:"flex-end",paddingRight:"0.5em"}}});var ut=[{path:"/database",label:"Database",component:A,detailRoute:{path:"/database/local/:id",component:ve}},{path:"/meals",label:"Meals",component:$e,detailRoute:{path:"/meals/:id",component:We}},{path:"/settings",label:"Settings",component:Ge}];function st(e){var t=e.location,a=e.className;return l.a.createElement(b.a,{value:t.pathname,indicatorColor:"primary",textColor:"primary",className:a},ut.map(function(e){return l.a.createElement(v.a,{component:x.b,label:e.label,value:e.path,to:e.path,key:e.path})}))}function mt(e){var t=e.backPath,a=l.a.useState(!1),n=Object(d.a)(a,2),r=n[0],c=n[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{onClick:function(){return c(!0)}},l.a.createElement(O.a,null)),l.a.createElement(p.a,{variant:"h6",component:"h1",className:e.className}),r&&l.a.createElement(j.a,{to:t}))}var dt=function(e){var t=it(),a=function(e){return l.a.createElement(st,Object.assign({className:t.toolbarContent},e))};return l.a.createElement(x.a,{basename:lt},l.a.createElement(j.b,{exact:!0,path:"/",render:function(){return l.a.createElement(j.a,{to:"/database"})}}),l.a.createElement(E.a,{position:"static",color:"default",elevation:0,className:t.appBar},l.a.createElement(g.a,{variant:"dense",className:t.toolbar,disableGutters:!0},ut.map(function(e){return l.a.createElement(j.d,{key:e.path},e.detailRoute&&l.a.createElement(j.b,{path:e.detailRoute.path,render:(n=e.path,function(e){return l.a.createElement(mt,Object.assign({className:t.toolbarContent,backPath:n},e))})}),l.a.createElement(j.b,{path:e.path,render:a}));var n}),l.a.createElement(j.b,{path:"/database",render:function(){return l.a.createElement(y.a,{component:x.b,to:"/database/local/new",variant:"contained",color:"primary"},"ADD FOOD")}}),l.a.createElement(j.b,{path:"/meals",render:function(){return l.a.createElement(y.a,{component:x.b,to:"/meals/new",variant:"contained",color:"primary"},"ADD MEAL")}}))),l.a.createElement("div",{className:t.scrollContainer},l.a.createElement("div",{className:t.tabContentWrapper},l.a.createElement("div",{className:t.tabContent},ut.map(function(e){return l.a.createElement(j.d,{key:e.path},e.detailRoute&&l.a.createElement(j.b,{path:e.detailRoute.path,render:function(t){return l.a.createElement(e.detailRoute.component,Object.assign({backPath:e.path},t))}}),l.a.createElement(j.b,{path:e.path,component:e.component}))})))),l.a.createElement(et,null))},ft=a(519);function pt(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ft.a,null),l.a.createElement(dt,null))}var bt={foods:ne,meals:Me,servingSizes:Object(m.b)({slice:"servingSizes",initialState:[{id:0,label:"100g",value:100,valueLabel:"g"},{id:1,label:"1",value:1,valueLabel:""}],reducers:{}}).reducer,settings:Ze};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function vt(){return(vt=Object(c.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.localFood.getAllItems();case 2:return e.t0=e.sent,e.next=5,pe.sfcdFoodCache.getAllItems();case 5:return e.t1=e.sent,e.t2={local:e.t0,sfcd:e.t1},e.next=9,pe.meals.getAllItems();case 9:return e.t3=e.sent,e.next=12,pe.settings.get("demoDataNoticeShown");case 12:return e.t4=!e.sent,e.next=15,pe.settings.get("macroColors");case 15:e.t5=e.sent,e.t6={showDemoDataNotice:e.t4,macroColors:e.t5},t={foods:e.t2,meals:e.t3,settings:e.t6},a=Object(m.a)({reducer:bt,preloadedState:t}),u.a.render(l.a.createElement(s.a,{store:a},l.a.createElement(pt,null)),document.getElementById("root"));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){vt.apply(this,arguments)}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[262,1,2]]]);
//# sourceMappingURL=main.7bebef9a.chunk.js.map